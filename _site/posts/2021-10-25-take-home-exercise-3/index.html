<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
<title>Megan's IS415 Journey: Take-Home Exercise 3: Hedonic Pricing Models for Resale Prices of Public Housing in Singapore</title>

<meta property="description" itemprop="description" content="This analysis aims to investigate and explain the factors affecting resale prices of public housing in Singapore through appropriate hedonic pricing models."/>


<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-10-25"/>
<meta property="article:created" itemprop="dateCreated" content="2021-10-25"/>
<meta name="article:author" content="Megan Sim"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Megan&#39;s IS415 Journey: Take-Home Exercise 3: Hedonic Pricing Models for Resale Prices of Public Housing in Singapore"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="This analysis aims to investigate and explain the factors affecting resale prices of public housing in Singapore through appropriate hedonic pricing models."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Megan&#39;s IS415 Journey"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary"/>
<meta property="twitter:title" content="Megan&#39;s IS415 Journey: Take-Home Exercise 3: Hedonic Pricing Models for Resale Prices of Public Housing in Singapore"/>
<meta property="twitter:description" content="This analysis aims to investigate and explain the factors affecting resale prices of public housing in Singapore through appropriate hedonic pricing models."/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","categories","output"]}},"value":[{"type":"character","attributes":{},"value":["Take-Home Exercise 3: Hedonic Pricing Models for Resale Prices of Public Housing in Singapore"]},{"type":"character","attributes":{},"value":["This analysis aims to investigate and explain the factors affecting resale prices of public housing in Singapore through appropriate hedonic pricing models."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Megan Sim"]},{"type":"character","attributes":{},"value":["https://www.linkedin.com/in/megan-sim-tze-yen/"]}]}]},{"type":"character","attributes":{},"value":["10-25-2021"]},{"type":"character","attributes":{},"value":["Take-Home Exercise"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["code_folding","toc","toc_depth","self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[3]},{"type":"logical","attributes":{},"value":[false]}]}]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["data/aspatial/metadata-resale-flat-prices.txt","data/aspatial/resale-flat-prices-based-on-approval-date-1990-1999.csv","data/aspatial/resale-flat-prices-based-on-approval-date-2000-feb-2012.csv","data/aspatial/resale-flat-prices-based-on-registration-date-from-jan-2015-to-dec-2016.csv","data/aspatial/resale-flat-prices-based-on-registration-date-from-jan-2017-onwards.csv","data/aspatial/resale-flat-prices-based-on-registration-date-from-mar-2012-to-dec-2014.csv","data/aspatial/top10_prisch.xlsx","data/geospatial/BusStop.cpg","data/geospatial/BusStop.dbf","data/geospatial/BusStop.lyr","data/geospatial/BusStop.prj","data/geospatial/BusStop.sbn","data/geospatial/BusStop.sbx","data/geospatial/BusStop.shp","data/geospatial/BusStop.shp.xml","data/geospatial/BusStop.shx","data/geospatial/CostalOutline.dbf","data/geospatial/CostalOutline.prj","data/geospatial/CostalOutline.sbn","data/geospatial/CostalOutline.sbx","data/geospatial/CostalOutline.shp","data/geospatial/CostalOutline.shx","data/geospatial/extracted/childcare.dbf","data/geospatial/extracted/childcare.prj","data/geospatial/extracted/childcare.shp","data/geospatial/extracted/childcare.shx","data/geospatial/extracted/eldercare.dbf","data/geospatial/extracted/eldercare.prj","data/geospatial/extracted/eldercare.shp","data/geospatial/extracted/eldercare.shx","data/geospatial/extracted/hawkercentres.dbf","data/geospatial/extracted/hawkercentres.prj","data/geospatial/extracted/hawkercentres.shp","data/geospatial/extracted/hawkercentres.shx","data/geospatial/extracted/kindergartens.dbf","data/geospatial/extracted/kindergartens.prj","data/geospatial/extracted/kindergartens.shp","data/geospatial/extracted/kindergartens.shx","data/geospatial/extracted/parks.dbf","data/geospatial/extracted/parks.prj","data/geospatial/extracted/parks.shp","data/geospatial/extracted/parks.shx","data/geospatial/extracted/supermarkets.dbf","data/geospatial/extracted/supermarkets.prj","data/geospatial/extracted/supermarkets.shp","data/geospatial/extracted/supermarkets.shx","data/geospatial/MP14_SUBZONE_WEB_PL.dbf","data/geospatial/MP14_SUBZONE_WEB_PL.kml","data/geospatial/MP14_SUBZONE_WEB_PL.prj","data/geospatial/MP14_SUBZONE_WEB_PL.sbn","data/geospatial/MP14_SUBZONE_WEB_PL.sbx","data/geospatial/MP14_SUBZONE_WEB_PL.shp","data/geospatial/MP14_SUBZONE_WEB_PL.shp.xml","data/geospatial/MP14_SUBZONE_WEB_PL.shx","data/geospatial/MRTLRTStnPtt.CPG","data/geospatial/MRTLRTStnPtt.dbf","data/geospatial/MRTLRTStnPtt.prj","data/geospatial/MRTLRTStnPtt.sbn","data/geospatial/MRTLRTStnPtt.sbx","data/geospatial/MRTLRTStnPtt.shp","data/geospatial/MRTLRTStnPtt.shp.xml","data/geospatial/MRTLRTStnPtt.shx","data/geospatial/selfsourced/chas-clinics-geojson.geojson","data/geospatial/selfsourced/chas-clinics-kml.kml","data/geospatial/selfsourced/hospitals.xlsx","data/geospatial/selfsourced/mall_coordinates_updated.csv","data/geospatial/selfsourced/metadata-chas-clinics.txt","data/geospatial/selfsourced/moh_isp_clinics.dbf","data/geospatial/selfsourced/moh_isp_clinics.prj","data/geospatial/selfsourced/moh_isp_clinics.shp","data/geospatial/selfsourced/moh_isp_clinics.shx","images/choosing_parks.png","images/concord_google.png","images/concord_headlines1.png","images/concord_headlines2.png","images/essential_amenities1.png","images/essential_amenities2.png","images/hospital_excel.png","images/hospitals_healthhub.png","images/hospitals_wikipedia.png","images/importmethods.png","images/onemap_search1.png","images/onemap_search2.png","images/primaryschool_top10.png","images/tibble_more_rows.png","images/tibble_show_rows.png","resources/Economic returns to energy-efficient investments in the housing market.pdf","resources/factsheetOneMappdf.pdf","resources/Government Policies and Private Housing Prices in Singapore.pdf","resources/onemapsgapi.pdf","take-home-exercise-3_files/anchor-4.2.2/anchor.min.js","take-home-exercise-3_files/bowser-1.9.3/bowser.min.js","take-home-exercise-3_files/distill-2.2.21/template.v2.js","take-home-exercise-3_files/header-attrs-2.10.6/header-attrs.js","take-home-exercise-3_files/header-attrs-2.11/header-attrs.js","take-home-exercise-3_files/jquery-3.6.0/jquery-3.6.0.js","take-home-exercise-3_files/jquery-3.6.0/jquery-3.6.0.min.js","take-home-exercise-3_files/jquery-3.6.0/jquery-3.6.0.min.map","take-home-exercise-3_files/kePrint-0.0.1/kePrint.js","take-home-exercise-3_files/lightable-0.0.1/lightable.css","take-home-exercise-3_files/panelset-0.2.6/panelset.css","take-home-exercise-3_files/panelset-0.2.6/panelset.js","take-home-exercise-3_files/popper-2.6.0/popper.min.js","take-home-exercise-3_files/tippy-6.2.7/tippy-bundle.umd.min.js","take-home-exercise-3_files/tippy-6.2.7/tippy-light-border.css","take-home-exercise-3_files/tippy-6.2.7/tippy.css","take-home-exercise-3_files/tippy-6.2.7/tippy.umd.min.js","take-home-exercise-3_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        return "<p>" + $('#ref-' + ref).html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
</style>
<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */

@import url('https://fonts.googleapis.com/css2?family=Alata');
@import url('https://fonts.googleapis.com/css2?family=Fira+Mono');
@import url('https://fonts.googleapis.com/css2?family=Markazi+Text');
@import url('https://fonts.googleapis.com/css2?family=Lato');

html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       0.9rem;                     /* edited */
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #14213d;                    /* edited */
  --header-color:    #14213d;                    /* edited */
  --body-color:      #14213d;                    /* edited */
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    'Alata', sans-serif;        /* edited */
  --mono-font:       'Fira Mono', monospace;     /* edited */
  --body-font:       'Lato', sans-serif;         /* edited */
  --navbar-font:     'Alata', sans-serif;        /* edited */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   #14213d;                   /* edited */
  --body-size:       0.8rem;
  --body-color:      #14213d;                   /* edited */
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    20px;
  --contents-size:   15px;  
  --padding-left:    30px;
  --padding-right:   40px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    18px;
  --heading-color:   #14213d;                   /* edited */
  --text-size:       1.1rem;                    /* edited */
  --text-color:      #14213d;                   /* edited */
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       20px;                      /* edited */
  --text-color:       #14213d;                   /* edited */
  --text-size:        18px;                      /* edited */
  --hover-color:      #ffffff;                   /* edited */
  --bkgd-color:       #fca311;                   /* edited */
}

.distill-site-footer {
  --text-color:       #14213d;                   /* edited */
  --text-size:        18px;                      /* edited */
  --hover-color:      #ffffff;                   /* edited */
  --bkgd-color:       #fca311;                   /* edited */
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */

d-title {
	height: 100%;
	/* max-height: 600px; */
	width: auto;
	background-color: hsla(200,40%,30%,.4);
	background-image:		
		url('/title_background.png'),
		url('/white.jpg'),
		url('/white.jpg'),
		url('/white.jpg'),
		url('/white.jpg');
	
	background-repeat: repeat-x;
	background-position: 
		0 70%,
		0 100%,
		0 50%,
		0 100%,
		0 0;
	background-size: 
		1200px,
		500px,
		500px 200px,
		500px,
		500px 260px;
	animation: 800s para infinite linear;
	}

@keyframes para {
	100% {
		background-position: 
			-5000px 20%,
			-800px 95%,
			500px 50%,
			1000px 100%,
			400px 0;
		}
	}
	
d-title p{
  background-color: rgba(255, 255, 255, 0.90);   
  line-height: 1.75em;
  text-align: center;
}

d-title h1{
  background-color: rgba(255, 255, 255, 0.90);  
  line-height: 1.75em;
  text-align: center;
}

/* Change appearance of headers */
h1, h2, h3, h4, h5 {
    font-weight: 700;
}

/* Use specific font in the body of the text */
html, body, p {
    font-weight: 500;
  	max-width: 100% !important;
  	width: 100%;
}

/* Change the appearance of code chunks -- added*/ 
d-article div.sourceCode pre {
  overflow-x: scroll !important;
  font-family: 'Fira Mono', sans-serif;
  color: #383838;
  font-size: 25%;
  line-height: 1.45;
  background-color: #f0f5fa;
  border-left: 0;
  white-space: pre-wrap;
  width:auto;
}

ul > li::marker {
    font-weight: 700;
    font-size: 1.125em;
}

::-webkit-scrollbar{
    width: 10px;
    height: 5px;
}
::-webkit-scrollbar-track{
    background-color: rgb(255, 255, 255);
    border-radius: 10px;
}
::-webkit-scrollbar-thumb{
    background: rgba(249, 83, 85, 0.20);
    border-radius: 10px;
}
::-webkit-scrollbar-thumb:hover{
    background: rgba(249, 83, 85, 0.30);
}

/*-- animated hand wave --*/
/* credit here: https://jarv.is/notes/css-waving-hand-emoji/ */
.body {
  background-image:	url('/IS415_bg.png');
  background-repeat: no-repeat;
  background-size: cover;
}

.wave {
  animation-name: wave-animation;  /* Refers to the name of your @keyframes element below */
  animation-duration: 2.5s;        /* Change to speed up or slow down */
  animation-iteration-count: infinite;  /* Never stop waving :) */
  transform-origin: 70% 70%;       /* Pivot around the bottom-left palm */
  display: inline-block;
}

@keyframes wave-animation {
    0% { transform: rotate( 0.0deg) }
   10% { transform: rotate(14.0deg) }  /* The following five values can be played with to make the waving more or less extreme */
   20% { transform: rotate(-8.0deg) }
   30% { transform: rotate(14.0deg) }
   40% { transform: rotate(-4.0deg) }
   50% { transform: rotate(10.0deg) }
   60% { transform: rotate( 0.0deg) }  /* Reset for the last half to pause */
  100% { transform: rotate( 0.0deg) }
}
</style>
<style type="text/css">
/* base style */

/* FONT FAMILIES */

:root {
  --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

body,
.posts-list .post-preview p,
.posts-list .description p {
  font-family: var(--body-font), var(--body-default);
}

h1, h2, h3, h4, h5, h6,
.posts-list .post-preview h2,
.posts-list .description h2 {
  font-family: var(--heading-font), var(--heading-default);
}

d-article div.sourceCode code,
d-article pre code {
  font-family: var(--mono-font), var(--mono-default);
}


/*-- TITLE --*/
d-title h1,
.posts-list > h1 {
  color: var(--title-color, black);
}

d-title h1 {
  font-size: var(--title-size, 50px);
}

/*-- HEADERS --*/
d-article h1,
d-article h2,
d-article h3,
d-article h4,
d-article h5,
d-article h6 {
  color: var(--header-color, rgba(0, 0, 0, 0.8));
}

/*-- BODY --*/
d-article > p,  /* only text inside of <p> tags */
d-article > ul, /* lists */
d-article > ol {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
  font-size: var(--body-size, 1.06rem);
}


/*-- CODE --*/
d-article div.sourceCode code,
d-article pre code {
  font-size: var(--code-size, 14px);
}

/*-- ASIDE --*/
d-article aside {
  font-size: var(--aside-size, 12px);
  color: var(--aside-color, rgba(0, 0, 0, 0.6));
}

/*-- FIGURE CAPTIONS --*/
figure .caption,
figure figcaption,
.figure .caption {
  font-size: var(--fig-cap-size, 13px);
  color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
}

/*-- METADATA --*/
d-byline h3 {
  font-size: var(--heading-size, 0.6rem);
  color: var(--heading-color, rgba(0, 0, 0, 0.5));
}

d-byline {
  font-size: var(--body-size, 0.8rem);
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

d-byline a,
d-article d-byline a {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

/*-- TABLE OF CONTENTS --*/
.d-contents nav h3 {
  font-size: var(--heading-size, 18px);
}

.d-contents nav a {
  font-size: var(--contents-size, 13px);
}

/*-- APPENDIX --*/
d-appendix h3 {
  font-size: var(--heading-size, 15px);
  color: var(--heading-color, rgba(0, 0, 0, 0.65));
}

d-appendix {
  font-size: var(--text-size, 0.8em);
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

d-appendix d-footnote-list a.footnote-backlink {
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

/*-- WEBSITE HEADER + FOOTER --*/
.distill-site-header .title {
  font-size: var(--title-size, 18px);
  font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a,
.nav-dropdown .nav-dropbtn {
  font-family: var(--navbar-font), var(--heading-default);
}

.nav-dropdown .nav-dropbtn {
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  font-size: var(--text-size, 15px);
}

.distill-site-header a:hover,
.nav-dropdown:hover .nav-dropbtn {
  color: var(--hover-color, white);
}

.distill-site-header {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer a:hover {
  color: var(--hover-color, white);
}</style>
<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.11/header-attrs.js"></script>
  <link href="../../site_libs/panelset-0.2.6/panelset.css" rel="stylesheet" />
  <script src="../../site_libs/panelset-0.2.6/panelset.js"></script>
  <script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Take-Home Exercise 3: Hedonic Pricing Models for Resale Prices of Public Housing in Singapore","description":"This analysis aims to investigate and explain the factors affecting resale prices of public housing in Singapore through appropriate hedonic pricing models.","authors":[{"author":"Megan Sim","authorURL":"https://www.linkedin.com/in/megan-sim-tze-yen/","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-10-25T00:00:00.000+08:00","citationText":"Sim, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">Megan's IS415 Journey</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">
<i class="fa fa-home" aria-hidden="true"></i>
</a>
<a href="../../about.html">whoami</a>
<div class="nav-dropdown">
<button class="nav-dropbtn">
In-Class Exercises
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="https://is415-msty.netlify.app/posts/2021-08-23-in-class-exercise-3/">In-Class Exercise 2</a>
<a href="https://is415-msty.netlify.app/posts/2021-09-02-in-class-exercise-3/">In-Class Exercise 3</a>
<a href="https://is415-msty.netlify.app/posts/2021-09-06-in-class-exercise-4/">In-Class Exercise 4</a>
<a href="https://is415-msty.netlify.app/posts/2021-09-13-in-class-exercise-5/">In-Class Exercise 5</a>
<a href="https://is415-msty.netlify.app/posts/2021-09-18-hands-on-exercise-6/">In-Class Exercise 6</a>
<a href="https://is415-msty.netlify.app/posts/2021-10-11-hands-on-exercise-8/">In-Class Exercise 8</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Hands-On Exercises
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="https://is415-msty.netlify.app/posts/2021-08-30-hands-on-exercise-2/">Hands-On Exercise 2</a>
<a href="https://is415-msty.netlify.app/posts/2021-09-02-hands-on-exercise-3/">Hands-On Exercise 3</a>
<a href="https://is415-msty.netlify.app/posts/2021-09-05-hands-on-exercise-4/">Hands-On Exercise 4</a>
<a href="https://is415-msty.netlify.app/posts/2021-09-12-hands-on-exercise-5a/">Hands-On Exercise 5A</a>
<a href="https://is415-msty.netlify.app/posts/2021-09-23-hands-on-exercise-5b/">Hands-On Exercise 5B</a>
<a href="https://is415-msty.netlify.app/posts/2021-09-18-hands-on-exercise-6/">Hands-On Exercise 6</a>
<a href="https://is415-msty.netlify.app/posts/2021-09-27-hands-on-exercise-7/">Hands-On Exercise 7</a>
<a href="https://is415-msty.netlify.app/posts/2021-10-11-hands-on-exercise-8/">Hands-On Exercise 8</a>
<a href="https://is415-msty.netlify.app/posts/2021-10-17-hands-on-exercise-9/">Hands-On Exercise 9</a>
<a href="https://is415-msty.netlify.app/posts/2021-10-24-hands-on-exercise-10/">Hands-On Exercise 10</a>
<a href="https://is415-msty.netlify.app/posts/2021-10-31-hands-on-exercise-11/">FEATURED: Hands-On Exercise 11</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Take-Home Exercises
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="https://is415-msty.netlify.app/posts/2021-09-10-take-home-exercise-1/">Take-Home Exercise 1</a>
<a href="https://is415-msty.netlify.app/posts/2021-09-19-take-home-exercise-2/">Take-Home Exercise 2</a>
<a href="https://is415-msty.netlify.app/posts/2021-10-25-take-home-exercise-3/">Take-Home Exercise 3</a>
</div>
</div>
<a href="https://github.com/boiledcactus">
<i class="fa fa-github" aria-hidden="true"></i>
</a>
<a href="https://www.linkedin.com/in/megan-sim-tze-yen/">
<i class="fa fa-linkedin" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Take-Home Exercise 3: Hedonic Pricing Models for Resale Prices of Public Housing in Singapore</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
  <a href="../../index.html#category:Take-Home_Exercise" class="dt-tag">Take-Home Exercise</a>
</div>
<!--/radix_placeholder_categories-->
<p><p>This analysis aims to investigate and explain the factors affecting resale prices of public housing in Singapore through appropriate hedonic pricing models.</p></p>
</div>

<div class="d-byline">
  Megan Sim <a href="https://www.linkedin.com/in/megan-sim-tze-yen/" class="uri">https://www.linkedin.com/in/megan-sim-tze-yen/</a> 
  
<br/>10-25-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#overview">1.0 Overview</a>
<ul>
<li><a href="#background">1.1 Background</a></li>
<li><a href="#problem-statement">1.2 Problem Statement</a></li>
</ul></li>
<li><a href="#setup">2.0 Setup</a>
<ul>
<li><a href="#packages-used">2.1 Packages Used</a></li>
<li><a href="#datasets-used">2.2 Datasets Used</a></li>
<li><a href="#self-sourcing-collating-hospital-data">2.3 Self-sourcing + Collating Hospital Data</a></li>
<li><a href="#good-primary-schools">2.4 Good Primary Schools</a></li>
<li><a href="#using-the-onemapsg-api">2.5 Using the OneMapSG API</a></li>
</ul></li>
<li><a href="#data-wrangling-geospatial-data">3.0 Data Wrangling: Geospatial Data</a>
<ul>
<li><a href="#importing-geospatial-data">3.1 Importing Geospatial Data</a></li>
</ul></li>
</ul>
</nav>
</div>
<h2 id="overview">1.0 Overview</h2>
<h3 id="background">1.1 Background</h3>
<p><to be added later></p>
<h4 id="articles-to-discuss-positivepast-news">Articles to discuss (positive/past news):</h4>
<ul>
<li><a href="https://www.bloomberg.com/news/articles/2020-07-08/behind-the-design-of-singapore-s-low-cost-housing" class="uri">https://www.bloomberg.com/news/articles/2020-07-08/behind-the-design-of-singapore-s-low-cost-housing</a></li>
<li><a href="https://www.hdb.gov.sg/about-us/our-role/public-housing-a-singapore-icon" class="uri">https://www.hdb.gov.sg/about-us/our-role/public-housing-a-singapore-icon</a></li>
</ul>
<h4 id="articles-to-discuss-negativecurrent-news">Articles to discuss (negative/current news):</h4>
<ul>
<li><a href="https://www.channelnewsasia.com/commentary/bto-hdb-expensive-city-center-young-couples-first-home-1841541" class="uri">https://www.channelnewsasia.com/commentary/bto-hdb-expensive-city-center-young-couples-first-home-1841541</a></li>
<li><a href="https://www.bloomberg.com/news/articles/2021-03-09/singapore-s-public-housing-prices-soar-as-frenzy-grips-market" class="uri">https://www.bloomberg.com/news/articles/2021-03-09/singapore-s-public-housing-prices-soar-as-frenzy-grips-market</a></li>
<li><a href="https://www.scmp.com/week-asia/economics/article/3149936/singapores-first-time-homebuyers-bind-public-housing-prices" class="uri">https://www.scmp.com/week-asia/economics/article/3149936/singapores-first-time-homebuyers-bind-public-housing-prices</a></li>
<li><a href="https://therealdeal.com/national/2021/03/14/singapores-subsidized-housing-market-heats-up/" class="uri">https://therealdeal.com/national/2021/03/14/singapores-subsidized-housing-market-heats-up/</a></li>
</ul>
<h4 id="reference-to-past-papers">Reference to past papers:</h4>
<ul>
<li><a href="https://www.sciencedirect.com/science/article/abs/pii/S016604621100055X">Economic returns to energy-efficient investments in the housing market: Evidence from Singapore</a> &gt; can reference hedonic pricing model in this</li>
<li><a href="https://journals-sagepub-com.libproxy.smu.edu.sg/doi/abs/10.1080/0042098975268">Government Policies and Private Housing Prices in Singapore</a> &gt; use for background on housing, not for the actual methodology. can also download from <a href="https://ink.library.smu.edu.sg/cgi/viewcontent.cgi?article=1117&amp;context=soe_research">ink.library.smu.edu.sg as pdf</a></li>
</ul>
<h3 id="problem-statement">1.2 Problem Statement</h3>
<p>Housing prices are affected by a litany of factors: financial factors like the economic health of the country and the purchasing power of its citizens, structural factors like the characteristics of the properties (e.g.size, tenure), and locational factors like proximity to childcare centers, academic institutions and general accessibility.</p>
<p>Our aim is to build a hedonic pricing model with the appropriate GWR methods to <strong>explain the factors affecting resale prices of public housing in Singapore.</strong></p>
<h2 id="setup">2.0 Setup</h2>
<h3 id="packages-used">2.1 Packages Used</h3>
<p>The R packages well use for this analysis are:</p>
<ul>
<li><a href="https://cran.r-project.org/web/packages/sf/index.html"><strong>sf</strong></a>: used for importing, managing, and processing geospatial data</li>
<li><a href="https://www.tidyverse.org/"><strong>tidyverse</strong></a>: a collection of packages for data science tasks</li>
<li><a href="https://cran.r-project.org/web/packages/tmap/index.html"><strong>tmap</strong></a>: used for creating thematic maps, such as choropleth and bubble maps</li>
<li><a href="https://cran.r-project.org/web/packages/spdep/index.html"><strong>spdep</strong></a>: used to create spatial weights matrix objects, global and local spatial autocorrelation statistics and related calculations (e.g.spatially lag attributes)</li>
<li><a href="https://cran.r-project.org/web/packages/onemapsgapi/index.html"><strong>onemapsgapi</strong></a>: used to query Singapore-specific spatial data, alongside additional functionalities. Recommended readings: <a href="https://cran.r-project.org/web/packages/onemapsgapi/vignettes/onemapsgapi_vignette.html">Vignette</a> and <a href="https://www.onemap.gov.sg/docs/">Documentation</a></li>
<li>[<strong>httr</strong>](<a href="https://cran.r-project.org/web/packages/httr/" class="uri">https://cran.r-project.org/web/packages/httr/</a>: used to make API calls, such as a GET request</li>
<li><a href="https://cran.r-project.org/web/packages/units/index.html"><strong>units</strong></a>: used to for manipulating numeric vectors that have physical measurement units associated with them</li>
<li><a href="https://cran.r-project.org/web/packages/matrixStats/index.html"><strong>matrixStats</strong></a>: a set of high-performing functions foroperating on rows and columns of matrices</li>
</ul>
<p>The following <strong>tidyverse</strong> packages will be used:</p>
<ul>
<li><strong>readr</strong> for importing delimited files (.csv)</li>
<li><strong>readxl</strong> for importing Excel worksheets (.xlsx) - note that it has to be loaded explicitly as it is not a core tidyverse package</li>
<li><strong>tidyr</strong> for manipulating and tidying data</li>
<li><strong>dplyr</strong> for wrangling and transforming data</li>
<li><strong>ggplot2</strong> for visualising data</li>
</ul>
<p>In addition, these R packages are specific to building + visualising hedonic pricing models:</p>
<ul>
<li><a href="https://cran.r-project.org/web/packages/olsrr/index.html"><strong>olsrr</strong></a>: used for building least squares regression models</li>
<li><a href="https://cran.r-project.org/web/packages/corrplot/vignettes/corrplot-intro.html"><strong>coorplot</strong></a> + <a href="https://cran.r-project.org/web/packages/ggpubr/index.html"><strong>ggpubr</strong></a>: both are used for multivariate data visualisation &amp; analysis</li>
<li><a href="https://cran.r-project.org/web/packages/GWmodel/index.html"><strong>GWmodel</strong></a>: provides a collection of localised spatial statistical methods, such as summary statistics, principal components analysis, discriminant analysis and various forms of GW regression</li>
</ul>
<p>Lastly, here are the extra R packages that arent necessary for the analysis itself, but help us go the extra mile with visualisations and presentation of our analysis:</p>
<ul>
<li><a href="https://cran.r-project.org/web/packages/devtools/index.html"><strong>devtools</strong></a>: used for installing any R packages which is not available in RCRAN. In this context, itll be used to download the <a href="https://pkg.garrickadenbuie.com/xaringanExtra/#/"><strong>xaringanExtra</strong></a> package for <a href="https://pkg.garrickadenbuie.com/xaringanExtra/#/panelset">panelsets</a></li>
<li><a href="https://haozhu233.github.io/kableExtra/"><strong>kableExtra</strong></a>: an extension of kable, used for table customisation</li>
<li><a href="https://plotly.com/r/"><strong>plotly</strong></a>: used for creating interactive web graphics, and can be used in conjunction with ggplot2 with the <code>ggplotly()</code> function</li>
<li><a href="https://cran.r-project.org/web/packages/ggthemes/index.html"><strong>ggthemes</strong></a>: an extension of ggplot2, with more advanced themes for plotting</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># initialise a list of required packages</span>
<span class='va'>packages</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'sf'</span>, <span class='st'>'tidyverse'</span>, <span class='st'>'tmap'</span>, <span class='st'>'spdep'</span>, <span class='st'>'onemapsgapi'</span>, <span class='st'>'units'</span>, <span class='st'>'matrixStats'</span>, <span class='st'>'readxl'</span>,
             <span class='st'>'olsrr'</span>, <span class='st'>'corrplot'</span>, <span class='st'>'ggpubr'</span>, <span class='st'>'GWmodel'</span>,
             <span class='st'>'devtools'</span>, <span class='st'>'kableExtra'</span>, <span class='st'>'plotly'</span>, <span class='st'>'ggthemes'</span><span class='op'>)</span>

<span class='co'># for each package, check if installed and if not, install it</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>p</span> <span class='kw'>in</span> <span class='va'>packages</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>p</span>,character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>devtools</span><span class='fu'>::</span><span class='fu'><a href='https://devtools.r-lib.org//reference/remote-reexports.html'>install_github</a></span><span class='op'>(</span><span class='st'>"gadenbuie/xaringanExtra"</span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/gadenbuie/xaringanExtra'>xaringanExtra</a></span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>xaringanExtra</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/xaringanExtra/man/panelset.html'>use_panelset</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h3 id="datasets-used">2.2 Datasets Used</h3>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># initialise a dataframe of our aspatial and geospatial dataset details</span>
<span class='va'>datasets</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
  Type<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Aspatial"</span>,
         <span class='st'>"Geospatial"</span>,
         <span class='st'>"Geospatial"</span>,
         <span class='st'>"Geospatial"</span>,
         <span class='st'>"Geospatial"</span>,
         
         <span class='st'>"Geospatial - Extracted"</span>,
         <span class='st'>"Geospatial - Extracted"</span>,
         <span class='st'>"Geospatial - Extracted"</span>,
         <span class='st'>"Geospatial - Extracted"</span>,
         <span class='st'>"Geospatial - Extracted"</span>,
         <span class='st'>"Geospatial - Extracted"</span>,
         <span class='st'>"Geospatial - Extracted"</span>,
         
         <span class='st'>"Geospatial - Selfsourced"</span>,
         <span class='st'>"Geospatial - Selfsourced"</span>,
         <span class='st'>"Geospatial - Selfsourced"</span>,
         <span class='st'>"Geospatial - Selfsourced"</span><span class='op'>)</span>,
  
  Name<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Resale Flat Prices"</span>,
         <span class='st'>"Singapore National Boundary"</span>,
         <span class='st'>"Master Plan 2014 Subzone Boundary (Web)"</span>,
         <span class='st'>"MRT &amp; LRT Locations Aug 2021"</span>,
         <span class='st'>"Bus Stop Locations Aug 2021"</span>,
         
         <span class='st'>"Childcare Services"</span>,
         <span class='st'>"Eldercare Services"</span>,
         <span class='st'>"Hawker Centres"</span>,
         <span class='st'>"Kindergartens"</span>,
         <span class='st'>"Parks"</span>,
         <span class='st'>"Supermarkets"</span>,
         <span class='st'>"Primary Schools"</span>,
         
         <span class='st'>"Community Health Assistance Scheme (CHAS) Clinics"</span>,
         <span class='st'>"Integrated Screening Programme (ISP) Clinics"</span>,
         <span class='st'>"Public, Private and Non-for-profit Hospitals"</span>,
         <span class='st'>"Shopping Mall SVY21 Coordinates`"</span><span class='op'>)</span>,
  
  Format<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>".csv"</span>, 
           <span class='st'>".shp"</span>, 
           <span class='st'>".shp"</span>, 
           <span class='st'>".shp"</span>, 
           <span class='st'>".shp"</span>,
           
           <span class='st'>".shp"</span>, 
           <span class='st'>".shp"</span>, 
           <span class='st'>".shp"</span>, 
           <span class='st'>".shp"</span>,
           <span class='st'>".shp"</span>, 
           <span class='st'>".shp"</span>,
           <span class='st'>".shp"</span>,
           
           <span class='st'>".kml"</span>,
           <span class='st'>".shp"</span>,
           <span class='st'>".xlsx"</span>,
           <span class='st'>".csv"</span><span class='op'>)</span>,
  
  Source<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"[data.gov.sg](https://data.gov.sg/dataset/resale-flat-prices)"</span>,
           <span class='st'>"[data.gov.sg](https://data.gov.sg/dataset/national-map-polygon)"</span>,
           <span class='st'>"[data.gov.sg](https://data.gov.sg/dataset/master-plan-2014-subzone-boundary-web)"</span>,
           <span class='st'>"[LTA Data Mall](https://datamall.lta.gov.sg/content/datamall/en/search_datasets.html?searchText=mrt)"</span>,
           <span class='st'>"[LTA Data Mall](https://datamall.lta.gov.sg/content/datamall/en/search_datasets.html?searchText=bus%20stop)"</span>,
           
           <span class='st'>"[OneMap API](https://www.onemap.gov.sg/docs/)"</span>,
           <span class='st'>"[OneMap API](https://www.onemap.gov.sg/docs/)"</span>,
           <span class='st'>"[OneMap API](https://www.onemap.gov.sg/docs/)"</span>,
           <span class='st'>"[OneMap API](https://www.onemap.gov.sg/docs/)"</span>,
           <span class='st'>"[OneMap API](https://www.onemap.gov.sg/docs/)"</span>,
           <span class='st'>"[OneMap API](https://www.onemap.gov.sg/docs/)"</span>,
           <span class='st'>"[OneMap API](https://www.onemap.gov.sg/docs/)"</span>,
           
           <span class='st'>"[data.gov.sg](https://data.gov.sg/dataset/chas-clinics)"</span>,
           <span class='st'>"[OneMap API](https://www.onemap.gov.sg/docs/)"</span>,
           <span class='st'>"Self-sourced and collated (section 2.3)"</span>,
           <span class='st'>"[Mall SVY21 Coordinates Web Scaper](https://github.com/ValaryLim/Mall-Coordinates-Web-Scraper)"</span><span class='op'>)</span>
  <span class='op'>)</span>

<span class='co'># with reference to this guide on kableExtra:</span>
<span class='co'># https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html</span>
<span class='co'># kable_material is the name of the kable theme</span>
<span class='co'># 'hover' for to highlight row when hovering, 'scale_down' to adjust table to fit page width</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://yihui.org/knitr/'>knitr</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://haozhu233.github.io/kableExtra/'>kableExtra</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/knitr/man/kable.html'>kable</a></span><span class='op'>(</span><span class='va'>datasets</span>, caption<span class='op'>=</span><span class='st'>"Datasets Used"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/kable_classic.html'>kable_material</a></span><span class='op'>(</span><span class='st'>"hover"</span>, latex_options<span class='op'>=</span><span class='st'>"scale_down"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<table class=" lightable-material lightable-hover" style="font-family: &quot;Source Sans Pro&quot;, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-3">Table 1: </span>Datasets Used
</caption>
<thead>
<tr>
<th style="text-align:left;">
Type
</th>
<th style="text-align:left;">
Name
</th>
<th style="text-align:left;">
Format
</th>
<th style="text-align:left;">
Source
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Aspatial
</td>
<td style="text-align:left;">
Resale Flat Prices
</td>
<td style="text-align:left;">
.csv
</td>
<td style="text-align:left;">
<a href="https://data.gov.sg/dataset/resale-flat-prices">data.gov.sg</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Geospatial
</td>
<td style="text-align:left;">
Singapore National Boundary
</td>
<td style="text-align:left;">
.shp
</td>
<td style="text-align:left;">
<a href="https://data.gov.sg/dataset/national-map-polygon">data.gov.sg</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Geospatial
</td>
<td style="text-align:left;">
Master Plan 2014 Subzone Boundary (Web)
</td>
<td style="text-align:left;">
.shp
</td>
<td style="text-align:left;">
<a href="https://data.gov.sg/dataset/master-plan-2014-subzone-boundary-web">data.gov.sg</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Geospatial
</td>
<td style="text-align:left;">
MRT &amp; LRT Locations Aug 2021
</td>
<td style="text-align:left;">
.shp
</td>
<td style="text-align:left;">
<a href="https://datamall.lta.gov.sg/content/datamall/en/search_datasets.html?searchText=mrt">LTA Data Mall</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Geospatial
</td>
<td style="text-align:left;">
Bus Stop Locations Aug 2021
</td>
<td style="text-align:left;">
.shp
</td>
<td style="text-align:left;">
<a href="https://datamall.lta.gov.sg/content/datamall/en/search_datasets.html?searchText=bus%20stop">LTA Data Mall</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Geospatial - Extracted
</td>
<td style="text-align:left;">
Childcare Services
</td>
<td style="text-align:left;">
.shp
</td>
<td style="text-align:left;">
<a href="https://www.onemap.gov.sg/docs/">OneMap API</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Geospatial - Extracted
</td>
<td style="text-align:left;">
Eldercare Services
</td>
<td style="text-align:left;">
.shp
</td>
<td style="text-align:left;">
<a href="https://www.onemap.gov.sg/docs/">OneMap API</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Geospatial - Extracted
</td>
<td style="text-align:left;">
Hawker Centres
</td>
<td style="text-align:left;">
.shp
</td>
<td style="text-align:left;">
<a href="https://www.onemap.gov.sg/docs/">OneMap API</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Geospatial - Extracted
</td>
<td style="text-align:left;">
Kindergartens
</td>
<td style="text-align:left;">
.shp
</td>
<td style="text-align:left;">
<a href="https://www.onemap.gov.sg/docs/">OneMap API</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Geospatial - Extracted
</td>
<td style="text-align:left;">
Parks
</td>
<td style="text-align:left;">
.shp
</td>
<td style="text-align:left;">
<a href="https://www.onemap.gov.sg/docs/">OneMap API</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Geospatial - Extracted
</td>
<td style="text-align:left;">
Supermarkets
</td>
<td style="text-align:left;">
.shp
</td>
<td style="text-align:left;">
<a href="https://www.onemap.gov.sg/docs/">OneMap API</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Geospatial - Extracted
</td>
<td style="text-align:left;">
Primary Schools
</td>
<td style="text-align:left;">
.shp
</td>
<td style="text-align:left;">
<a href="https://www.onemap.gov.sg/docs/">OneMap API</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Geospatial - Selfsourced
</td>
<td style="text-align:left;">
Community Health Assistance Scheme (CHAS) Clinics
</td>
<td style="text-align:left;">
.kml
</td>
<td style="text-align:left;">
<a href="https://data.gov.sg/dataset/chas-clinics">data.gov.sg</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Geospatial - Selfsourced
</td>
<td style="text-align:left;">
Integrated Screening Programme (ISP) Clinics
</td>
<td style="text-align:left;">
.shp
</td>
<td style="text-align:left;">
<a href="https://www.onemap.gov.sg/docs/">OneMap API</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Geospatial - Selfsourced
</td>
<td style="text-align:left;">
Public, Private and Non-for-profit Hospitals
</td>
<td style="text-align:left;">
.xlsx
</td>
<td style="text-align:left;">
Self-sourced and collated (section 2.3)
</td>
</tr>
<tr>
<td style="text-align:left;">
Geospatial - Selfsourced
</td>
<td style="text-align:left;">
Shopping Mall SVY21 Coordinates`
</td>
<td style="text-align:left;">
.csv
</td>
<td style="text-align:left;">
<a href="https://github.com/ValaryLim/Mall-Coordinates-Web-Scraper">Mall SVY21 Coordinates Web Scaper</a>
</td>
</tr>
</tbody>
</table>
</div>
<p><em>Each source links to the respective dataset source where possible - feel free download and follow along  </em></p>
<h4 id="data-considerations">Data considerations</h4>
<p>In reality, while most of the locational factors should be retrievable from the OneMapSG API, a number of them are <em>internal APIs</em> that cannot be shared due to copyright by the respective agencies. As such, data on MRT and Bus Stops were taken from <a href="https://datamall.lta.gov.sg/content/datamall/en.html">datamall.lta.gov.sg</a> instead.</p>
<h3 id="self-sourcing-collating-hospital-data">2.3 Self-sourcing + Collating Hospital Data</h3>
<p>Theres a locational feature that I felt was important in terms of accessibility: healthcare services, and hospitals in particular. However, this data isnt readily available, so I decided to try my hand at collating the data myself!</p>
<p>What I did was to search for a list of public, private and not-for-profit hospitals. <a href="https://www.healthhub.sg/directory/hospitals">Healthhub</a> and <a href="https://en.wikipedia.org/wiki/List_of_hospitals_in_Singapore">Wikipedia</a> served to be great resources for this, and I also cross-checked between them and with the <a href="https://www.sgdi.gov.sg/other-organisations/hospitals">Singapore Government Directory</a>.</p>
<center>
<img src="images/hospitals_wikipedia.png" style="width:90.0%" />
</center>
<p>From there, I used Google and Healthhub to verify their postal codes.</p>
<center>
<img src="images/hospitals_healthhub.png" style="width:90.0%" />
</center>
<p>With this, we have our excel workbook! Theres an All sheet which is the collation of all hospitals, and said hospitals are categorised under Public, Private and Not-for-Profit in their respective sheets. Our two columns are <code>Name</code> and <code>PostalCode</code>.</p>
<center>
<img src="images/hospital_excel.png" style="height:50.0%" />
</center>
<p>But wait! You might quip, those are only postal codes. We need the longitude and latitude if we want to analyse this as geospatial data!</p>
<p>No worries, dear reader! Our aim is to transform this .csv into a .shp, and thats possible with our handy OneMapSG API - specifically, the <a href="https://www.onemap.gov.sg/docs/#search">search function</a>. To use the search function, we have to specify:</p>
<ul>
<li><code>searchVal</code>: our search value</li>
<li><code>returnGeom {Y/N}</code>: whether we can to return the geometry</li>
<li><code>getAddrDetails {Y/N}</code>: whether we want to return address details for a point</li>
</ul>
<p>Lets try using the postal code of Ren Ci Community Hospital (329562) as our search value!</p>
<center>
<img src="images/onemap_search1.png" style="width:90.0%" />
</center>
<p>Oh no  As we can see, there could be multiple results for a single postal code, and as we can see: each result has a slightly different longitude/latitude. To rectify this and narrow down to our desired result, well add our hospital name to the search value:</p>
<center>
<img src="images/onemap_search2.png" style="width:90.0%" />
</center>
<p>There we go! Well properly pull in all these geographical attributes later when importing data.</p>
<p>Note that some hospitals are integrated into a healthcare hub with a community hospital: in other words, they are near each other, or in the case of Jurong Community Hospital and Ng Teng Fong General Hospital, share the same postal code. As weve seen from our OneMapSG API that the same postal code has different latitude + longitude for different buildings, and knowing that they serve different purposes and different types of patients, Ive opted to leave both types of hospitals in. However, you might want to take note of this for future work.</p>
<p>In addition, one of the hospitals listed on Wikipedia and Healthhub, Concord International Hospital, was reported to have <a href="https://www.channelnewsasia.com/singapore/concord-international-hospital-suspend-services-lapses-moh-505326">suspended their healthcare services</a>, but that article was followed up by a <a href="https://www.channelnewsasia.com/singapore/concord-international-hospital-allowed-resume-services-following-suspension-could-reopen-under-new-name-2017626">resumption of services, possibly under a new name</a>.</p>
<center>
<img src="images/concord_headlines1.png" style="width:80.0%" /> <img src="images/concord_headlines2.png" style="width:80.0%" />
</center>
<p>In addition, Google has listed it as permenanetly closed.</p>
<center>
<img src="images/concord_google.png" style="width:70.0%" />
</center>
<p>Due to the uncertain conditions of Concord International Hospital, Ive opted to leave it out of this dataset.</p>
<h3 id="good-primary-schools">2.4 Good Primary Schools</h3>
<p>Education and academic institutions are an especially important locational factors for families with children, or expect to have children. They are concerned about the number of schools around them - and also the proximity of their houses to good/elite schools, especially when <a href="https://www.moe.gov.sg/primary/p1-registration/distance">distance affects priority admission</a>. For this analysis, our focus will be on the primary-school level of education. While MOE doesnt release a ranking of the schools, we can roughly gauge the rank from a number of factors:</p>
<ul>
<li>Popularity in Primary 1 (P1) Registration</li>
<li>whether it offers the Gifted Education Programme (GEP)</li>
<li>if there is a Special Assistance Plan (SAP)</li>
<li>Achievements in the Singapore Youth Festival Arts Presentation</li>
<li>Representation in the Singapore National School Games</li>
<li>Singapore Uniformed Groups Unit Recognition</li>
</ul>
<p>Im referring to <a href="https://schlah.com/primary-schools">schlahs Primary School Rankings, 2020</a> as they transparently state the weights given for each factor.</p>
<center>
<img src="images/primaryschool_top10.png" style="width:90.0%" />
</center>
<p>Ive opted to save this as a .csv for reference, but well later pull in this data with OneMapSG APIs search function, like with the hospital.xlsx. Speaking of OneMapSG API lets look at how to use it in the next section!</p>
<h3 id="using-the-onemapsg-api">2.5 Using the OneMapSG API</h3>
<p>Last exercise, I met a wall with some authorisation issues with the OneMapSG API. But this time, I say goodbye to those worries - token in hand, I could make use of the API! Id recommend reading its <a href="https://cran.r-project.org/web/packages/onemapsgapi/onemapsgapi.pdf">introductory document</a> and its <a href="https://cran.r-project.org/web/packages/onemapsgapi/vignettes/onemapsgapi_vignette.html">vignette</a> to get a sensing as to how to use it. However, if you have similar authorisation issues, fret not: you can download the datasets from either <a href="https://data.gov.sg/">data.gov.sg</a> or <a href="https://datamall.lta.gov.sg/content/datamall/en.html">LTA Data Mall</a>. Check our <a href="https://www.tech.gov.sg/files/media/media-releases/2013/04/factsheetOneMappdf.pdf">this document</a> for the list of available themes.</p>
<p>Weve already discussed how to use the search function to help us with finding the longitude and latitude of our specified hospitals and primary schools - but what about whole datasets? Well, thats possible, of course! In fact, we can even download them as shapefiles. Heres my process for finding and downloading the relevant datasets:</p>
<ol type="1">
<li>Before we start, be sure to have your token! I preloaded mine into a <code>token</code> variable for ease of access.</li>
<li>Search for the specified theme with <code>search_themes(token, "searchval")</code> - for example, if I wanted to search for childcare services, Id run <code>search_themes(token, "childcare")</code> in my console</li>
<li>[Optional] Check the theme status with <code>get_theme_status(token, "themename")</code></li>
<li>The theme dataset is a tibble dataframe, so we can retrieve and store it with <code>themetibble &lt;- get_theme(token, "themename")</code></li>
<li>From here, we can convert our tibble dataframe to simple features dataframe. All the themes for this project use Lat and Lng as the latitude and longitude respectively, and our project coordinates system should be in the WGS84 system, aka ESPG code 4326. Thus, <code>themesf &lt;- st_as_sf(themetibble, coords=c("Lng", "Lat"), crs=4326)</code></li>
<li>Now, well need to write from an sf into a shapefile, which we can do with <code>st_write(themesf, "themename.shp")</code></li>
</ol>
<p>Heres the compilation of codes of the process, from start to finish:</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># i used this set of codes and ran them in the console for each locational factor</span>
<span class='co'># libraries should have been preloaded, but put here for reference of the necessary libraries!</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://r-spatial.github.io/sf/'>sf</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>onemapsgapi</span><span class='op'>)</span>

<span class='va'>token</span> <span class='op'>&lt;-</span> <span class='st'>"your value"</span>
<span class='fu'><a href='https://rdrr.io/pkg/onemapsgapi/man/search_themes.html'>search_themes</a></span><span class='op'>(</span><span class='va'>token</span>, <span class='st'>"searchval"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/onemapsgapi/man/get_theme_status.html'>get_theme_status</a></span><span class='op'>(</span><span class='va'>token</span>, <span class='st'>"themename"</span><span class='op'>)</span>
<span class='va'>themetibble</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/onemapsgapi/man/get_theme.html'>get_theme</a></span><span class='op'>(</span><span class='va'>token</span>, <span class='st'>"themename"</span><span class='op'>)</span>
<span class='va'>themesf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_as_sf.html'>st_as_sf</a></span><span class='op'>(</span><span class='va'>themetibble</span>, coords<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Lng"</span>, <span class='st'>"Lat"</span><span class='op'>)</span>, crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h4 id="things-to-look-out-for-when-using-the-api">Things to look out for when using the API</h4>
<p>Sometimes, when using <code>search_themes</code> to search for the datasets, your search value might turn up more than 10 results, but the tibble output auto-heads to the first 10 rows.</p>
<center>
<img src="images/tibble_more_rows.png" style="width:90.0%" />
</center>
<p>If you want to see more, what you can do is to add a %&gt;%print(n=desiredval) after your code, like so:</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Reference: https://stackoverflow.com/questions/49122347/having-trouble-viewing-more-than-10-rows-in-a-tibble</span>
<span class='fu'><a href='https://rdrr.io/pkg/onemapsgapi/man/search_themes.html'>search_themes</a></span><span class='op'>(</span><span class='va'>token</span>, <span class='st'>"parks"</span>, <span class='st'>"nparks"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>25</span><span class='op'>)</span> <span class='co'>#or your desired number</span>
</code></pre>
</div>
</details>
</div>
<center>
<img src="images/tibble_show_rows.png" style="width:90.0%" />
</center>
<p>In addition, there might be similarly titles themes that both seem relevant to your analysis at first glance. For example, the same nparks query above has both Parks and Nparks Parks and Nature Reserve, uploaded by the National Parks Board. Which one should we pick? A closer look brings us to this:</p>
<center>
<img src="images/choosing_parks.png" style="width:80.0%" />
</center>
<p>Notice that parks is for recreational purposes, while NParks Parks and Nature Reserve were uploaded with environmental purposes in mind. Seeing as were trying to relate the locational factors to the pricing of resale housing units, it makes more sense to go with the former!</p>
<h2 id="data-wrangling-geospatial-data">3.0 Data Wrangling: Geospatial Data</h2>
<p>Heres a lil refresher on the import methods:</p>
<center>
<img src="images/importmethods.png" style="width:90.0%" />
</center>
<h3 id="importing-geospatial-data">3.1 Importing Geospatial Data</h3>
<p>Other References: <a href="https://towardsdatascience.com/working-with-apis-in-data-science-explore-bit-rent-theory-in-singapores-hdb-resale-market-d7760fdfc601" class="uri">https://towardsdatascience.com/working-with-apis-in-data-science-explore-bit-rent-theory-in-singapores-hdb-resale-market-d7760fdfc601</a> <a href="https://towardsdatascience.com/geocoding-singapore-coordinates-onemap-api-3e1542bf26f7" class="uri">https://towardsdatascience.com/geocoding-singapore-coordinates-onemap-api-3e1542bf26f7</a></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
